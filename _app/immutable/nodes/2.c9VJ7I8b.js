import{a as I,t as M}from"../chunks/disclose-version.D7BRVwTw.js";import{h as w,s as D,F as Q,G as W,c as Z,b as q,I as ee,J as P,H as ae,d as U,e as J,f as x,K as te,r as X,a as $,p as ne,L as R,M as H,N as re,O as oe,P as le,m as se,Q as F,R as ie,S as fe,T as ce,U as ue,V as de,W as ve,X as B,Y as _e,B as E,y as pe,g as N,i as j,Z as ge,_ as he,C,$ as be,D as k,z as me}from"../chunks/runtime.lhGiHDMj.js";import{d as Se,s as Ne}from"../chunks/render.B5DSMxr7.js";import{i as we}from"../chunks/if.C32MN6Iv.js";import{b as ye}from"../chunks/paths.DknFq4ZQ.js";let L=null;function Ee(n,e){return e}function xe(n,e,a,l){for(var s=[],c=e.length,i=0;i<c;i++)fe(e[i].e,s,!0);var g=c>0&&s.length===0&&a!==null;if(g){var b=a.parentNode;ce(b),b.append(a),l.clear(),y(n,e[0].prev,e[c-1].next)}ue(s,()=>{for(var t=0;t<c;t++){var v=e[t];g||(l.delete(v.k),y(n,v.prev,v.next)),de(v.e,!g)}})}function Te(n,e,a,l,s,c=null){var i=n,g={flags:e,items:new Map,first:null};{var b=n;i=w?D(Q(b)):b.appendChild(W())}w&&Z();var t=null,v=!1;q(()=>{var o=a(),_=ee(o)?o:o==null?[]:P(o),u=_.length;if(v&&u===0)return;v=u===0;let d=!1;if(w){var p=i.data===ae;p!==(u===0)&&(i=U(),D(i),J(!1),d=!0)}if(w){for(var r=null,f,m=0;m<u;m++){if(x.nodeType===8&&x.data===te){i=x,d=!0,J(!1);break}var S=_[m],h=l(S,m);f=z(x,g,r,null,S,h,m,s,e),g.items.set(h,f),r=f}u>0&&D(U())}w||ke(_,g,i,s,e,l),c!==null&&(u===0?t?X(t):t=$(()=>c(i)):t!==null&&ne(t,()=>{t=null})),d&&J(!0),a()}),w&&(i=x)}function ke(n,e,a,l,s,c){var i=n.length,g=e.items,b=e.first,t=b,v,o=null,_=[],u=[],d,p,r,f;for(f=0;f<i;f+=1){if(d=n[f],p=c(d,f),r=g.get(p),r===void 0){var m=t?t.e.nodes_start:a;o=z(m,e,o,o===null?e.first:o.next,d,p,f,l,s),g.set(p,o),_=[],u=[],t=o.next;continue}if(Oe(r,d,f),r.e.f&R&&X(r.e),r!==t){if(v!==void 0&&v.has(r)){if(_.length<u.length){var S=u[0],h;o=S.prev;var T=_[0],O=_[_.length-1];for(h=0;h<_.length;h+=1)V(_[h],S,a);for(h=0;h<u.length;h+=1)v.delete(u[h]);y(e,T.prev,O.next),y(e,o,T),y(e,O,S),t=S,o=O,f-=1,_=[],u=[]}else v.delete(r),V(r,t,a),y(e,r.prev,r.next),y(e,r,o===null?e.first:o.next),y(e,o,r),o=r;continue}for(_=[],u=[];t!==null&&t.k!==p;)t.e.f&R||(v??(v=new Set)).add(t),u.push(t),t=t.next;if(t===null)continue;r=t}_.push(r),o=r,t=r.next}if(t!==null||v!==void 0){for(var A=v===void 0?[]:P(v);t!==null;)t.e.f&R||A.push(t),t=t.next;var G=A.length;if(G>0){var K=i===0?a:null;xe(e,A,K,g)}}H.first=e.first&&e.first.e,H.last=o&&o.e}function Oe(n,e,a,l){re(n.v,e),n.i=a}function z(n,e,a,l,s,c,i,g,b){var t=L;try{var v=(b&oe)!==0,o=(b&le)===0,_=v?o?se(s):F(s):s,u=b&ie?F(i):i,d={i:u,v:_,k:c,a:null,e:null,prev:a,next:l};return L=d,d.e=$(()=>g(n,_,u),w),d.e.prev=a&&a.e,d.e.next=l&&l.e,a===null?e.first=d:(a.next=d,a.e.next=d.e),l!==null&&(l.prev=d,l.e.prev=d.e),d}finally{L=t}}function V(n,e,a){for(var l=n.next?n.next.e.nodes_start:a,s=e?e.e.nodes_start:a,c=n.e.nodes_start;c!==l;){var i=ve(c);s.before(c),c=i}}function y(n,e,a){e===null?n.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Ae(n,e,a,l){var s=n.__attributes??(n.__attributes={});if(w){s[e]=n.getAttribute(e);return}s[e]!==(s[e]=a)&&(a==null?n.removeAttribute(e):typeof a!="string"&&Ie(n).includes(e)?n[e]=a:n.setAttribute(e,a))}var Y=new Map;function Ie(n){var e=Y.get(n.nodeName);if(e)return e;Y.set(n.nodeName,e=[]);for(var a,l=B(n),s=Element.prototype;s!==l;){a=_e(l);for(var c in a)a[c].set&&e.push(c);l=B(l)}return e}function De(n,e){localStorage.setItem("jsonData",JSON.stringify(N(e))),console.log("Data saved to localStorage")}function Je(n,e){const a=localStorage.getItem("jsonData");a?(j(e,JSON.parse(a)),console.log("Data loaded from localStorage")):console.log("No data found in localStorage")}var Re=(n,e)=>e(),Ce=(n,e)=>e("Marodeur"),Le=M("<li> </li>"),Me=M("<div><h2>Combatants:</h2> <ul></ul></div>"),Ue=M(`<h1>Splittermond Tickleisten Tool</h1> <p>This is a test to see if most important functionalities of the tool can be used in a client-side
	only environment.</p> <label for="battleScene">Upload JSON</label> <input type="file" id="battleScene" name="battleScene" accept="text/json" class="file-input w-full max-w-xs"> <button class="btn"><img width="30em" alt="download"> Download JSON</button> <button class="btn">Save</button> <button class="btn">Load</button> <button class="btn">Add Combatant</button> <!>`,1);function Pe(n){let e=null,a=ge({name:"",combatants:[]});function l(p){const r=p.target;r&&r.files&&(e=r.files[0],s())}function s(){if(e){const p=new FileReader;p.onload=r=>{var f;try{j(a,JSON.parse((f=r.target)==null?void 0:f.result)),console.log("Parsed JSON:",N(a))}catch(m){console.error("Error parsing JSON:",m),alert("Invalid JSON file")}},p.readAsText(e)}}function c(){if(N(a)){const p=new Blob([JSON.stringify(N(a),null,2)],{type:"application/json"}),r=URL.createObjectURL(p),f=document.createElement("a");f.href=r,f.download="data.json",f.click(),URL.revokeObjectURL(r)}else alert("No data to download")}function i(p){he(a,N(a).combatants=[...N(a).combatants,p])}var g=Ue(),b=E(pe(g),6);b.__change=l;var t=E(b,2);t.__click=[Re,c];var v=C(t);Ae(v,"src",`${ye??""}/svg/download-svgrepo-com.svg`),be(),k(t);var o=E(t,2);o.__click=[De,a];var _=E(o,2);_.__click=[Je,a];var u=E(_,2);u.__click=[Ce,i];var d=E(u,2);we(d,()=>N(a)!==null,p=>{var r=Me(),f=E(C(r),2);Te(f,5,()=>N(a).combatants,Ee,(m,S)=>{var h=Le(),T=C(h,!0);k(h),me(()=>Ne(T,N(S))),I(m,h)}),k(f),k(r),I(p,r)}),I(n,g)}Se(["change","click"]);export{Pe as component};
